<%- include('templates/header') %>

<div class="d-flex align-items-center justify-content-between mb-3">
  <h1 class="h5 mb-0">Scroll Mode</h1>
  <div class="d-flex gap-2">
    <a href="/home" class="btn btn-sm btn-outline-secondary">Home</a>
    <a href="/scroll" class="btn btn-sm btn-outline-primary" title="Restart sequence">Restart</a>
  </div>
</div>

<% if (!thread) { %>
  <div class="alert alert-secondary">
    No more threads in this session.
  </div>
  <a href="/scroll" class="btn btn-primary">Restart</a>
<% } else { %>
  <div class="card shadow-sm">
    <div class="card-body d-flex flex-column">
      <h3 class="h5 card-title mb-2">
        <a href="/thread?threadId=<%= thread.thread_id %>" class="text-decoration-none"><%= thread.title %></a>
      </h3>

      <p class="text-muted mb-3 d-flex align-items-center gap-2">
        <img src="<%= thread.profile_image || 'https://via.placeholder.com/20' %>"
             alt="owner avatar" class="rounded" width="20" height="20">
        <span>by <strong><%= thread.owner_name %></strong> Â· <%= new Date(thread.created_at).toLocaleString() %></span>
      </p>

      <p class="card-text flex-grow-1">
        <%= (thread.body || '').replace(/\r\n/g, '\n').trim() %>
      </p>

      <div class="d-flex justify-content-between align-items-center mt-3">
        <div class="d-flex gap-2">
          <span class="badge bg-light text-dark">ğŸ‘ï¸ <%= thread.views_count || 0 %></span>
          <span class="badge bg-light text-dark">ğŸ’¬ <%= thread.comments_count || 0 %></span>
          <span class="badge bg-light text-dark">â™¥ <%= thread.likes_count || 0 %></span>
        </div>
        <div class="d-flex align-items-center gap-2">
          <small class="text-muted"><%= remaining %> left</small>
          <a href="/scroll/next" class="btn btn-primary">Next</a>
        </div>
      </div>
    </div>
  </div>
<% } %>

<%- include('templates/footer') %>
